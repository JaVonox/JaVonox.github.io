<!DOCTYPE html>
<html>
<head>
<title> Jamie Gorman's Portfolio - Main Page </title>
</head>
<style>
	html
	{
		background-image:url('../../TemplateImage.png');
		background-attachment:fixed;
	}
	.midbox
	{
		background-color:white;
		box-sizing:border-box;
		text-align:center;
		width:60vw;
		margin:auto;
		padding-left:50px;
		padding-right:50px;
	}
</style>
<body style="margin:0;padding:0;">
<div class="midbox">
<h1>Juris Civilis</h1>
<img id="SlideshowBox" src="Slideshow/0.png" style="width:800px;height:600px;object-fit:scale-down;background-color:#b3b0a8;opacity:1;"/>
<br>
Texttexttext
<br><br>
<button onclick="location.href='https://github.com/JaVonox/Juris-Civilis'" style="position:relative;"> Github Link </button>
</div>
</body>
<script>
function imageRef(nRef,nDesc){ //Image reference type - includes the image file name and the associated description
	this.ref = nRef;
	this.desc = nDesc;
}

const loadedImages = 
[ new imageRef("0.png","A newly generated map"),
new imageRef("1.png","A partially populated map"),
new imageRef("2.png","The economic power of a culture on the map")
]; //Storage of the different images to display on the slideshow

var slideshowElement = document.getElementById("SlideshowBox");

var speed = 10; //Ms before image handler called
var rotationSpeed = 5000; //Time before a rotation occurs

var t=setInterval(_ImageHandle,speed);
var summation = 0; //Current amount of frames past (should meet rotation speed before the selected image is brought into view)
var i = 1; //The next image to load value
var fading = false;

var imageToLoad = ""; //Stores the image that must be loaded next. should be null when image loaded
var unfade = false; //Checks if the mode is set to make the image fade in rather than fade out

function _ImageHandle() //handles the rotation and fading of images
{
	summation += speed;
	if(summation >= rotationSpeed && fading == false) //If its time to rotate to the next image and the current image has loaded
	{
		console.log("Rotating mode");
		if(i < loadedImages.length)
		{
			console.log(i);
			imageToLoad ="Slideshow/"+loadedImages[i].ref;
			i++; //Increment next image counter
			fading = true;
			summation = 0; //reset sum
		}
		else
		{
			i = 0;
		}
	}
	else if(fading == true) //While the image is fading in and out
	{
		if(unfade == false) //If image has not yet changed
		{
			slideshowElement.style.opacity = slideshowElement.style.opacity - 0.025;
			
			if(slideshowElement.style.opacity <= 0.1)
			{
				slideshowElement.style.opacity = 0.1;
				slideshowElement.src = imageToLoad;
				unfade = true;
			}
		}
		else //When loading in the image
		{
			slideshowElement.style.opacity = parseFloat(slideshowElement.style.opacity) + 0.025;
			
			if(slideshowElement.style.opacity >= 1)
			{
				slideshowElement.style.opacity = 1;
				fading = false;
				unfade = false;
				imageToLoad = ""; //Reset image to load
			}
		}
	}
};
</script>
</html>