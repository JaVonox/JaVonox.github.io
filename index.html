<!DOCTYPE html>
<html>
<head>
<title> Jamie's very professional website </title>
<style>
	.backbox
	{
		width:100vw;
		height:100vh;
		background-color:red;
		box-sizing:border-box;
		text-align:center;
		padding:45vh;
		background-image:url('TemplateImage.png');
		background-repeat:no-repeat;
		background-size: 100% 100%;
	}
</style>
</head>
<body style="margin:0;padding:0;">
<svg id="polybox" style="z-index:1;position:absolute;width:100%;height:100%;">
</svg>
<div id="backing" class="backbox" style="z-index:-1">
<text style="color:black;font-size:25px;z-index:2;"> Jamie's Sweet Portfolio Website</text>
</div>
</body>

<script>
//<polygon id="Alaska_BristolBay" points="5,100 31,68 43,87"/>

var polygons = []; //Stores all indexes active
var polcounter = 0; //Counts up indexes

var bottom = document.getElementById("backing").offsetHeight;
var right = document.getElementById("backing").offsetWidth;

var t=setInterval(_Run,50);
var speed = 10;

function _DrawPoly() //Draws a polygon
{
	var polyString = "";
	var points = _NewPoly();
	
	polyString += "<polygon id = 'pol" + polcounter + "' points='" + _PrintPoints(points) + "' style='stroke:black;stroke-width:1;'></polygon>";
	
	polcounter +=1; //Increase count of polygon Ids
	polygons.push(polcounter); //Add index to array
	
	document.getElementById("polybox").innerHTML += polyString;
}

function _NewPoly() //Generates a new polygon at the bottom of the page
{
	var points = [];
	var vertexes = 3 + Math.floor(Math.random() * 3); //Random number of vertexes from 3 to 5
	var variance = 35 + Math.floor(Math.random() * 101);
	var centerY = Math.floor(Math.random() * bottom);
	var centerX = Math.floor(Math.random() * right);
	
	for(var i = 0; i < vertexes; i++) 
	{
		//points[i] = "" + Math.floor(Math.random() * right) + "," + Math.floor(Math.random() * bottom) + "";
		var pointString = "";
		
		var offsetX = Math.floor(Math.random() * variance);
		var flipX = Math.floor(Math.random() * 2);
		if(flipX = 0)
		{
			pointString += "" + (centerX + offsetX) + ",";
		}
		else
		{
			pointString += "" + (centerX - offsetX) + ",";
		}
		
		var offsetY = Math.floor(Math.random() * variance);
		var flipY = Math.floor(Math.random() * 2);
		
		//TODO add 0 as min y
		
		//Y is offset to be below the svg initially
		if(flipY = 0)
		{
			pointString += "" + (centerY + offsetY + bottom);
		}
		else
		{
			pointString += "" + (centerY - offsetY + bottom);
		}
		
		points[i] = pointString;
	}
	
	return points;
}

function _Run() //Repeatedly runs
{
	if(polygons.length < 10)
	{
		_DrawPoly();
	}
	
	_FloatPolygon();
}

function _FloatPolygon() //Make polygons float
{
	for(polyID in polygons)
	{
		var newString = "";
		
		var points = document.getElementById("pol" + polyID).getAttribute("points");
		
		var delimPoints = points.split(' ');
		var despawnPoints = delimPoints.length - 1;
		
		for(var pointIndex in delimPoints)
		{
			if(delimPoints[pointIndex] != "")
			{
				var pos = delimPoints[pointIndex].split(',');
				var newY = parseInt(pos[1]) - speed;
				newString += pos[0] + "," + (parseInt(pos[1]) - speed) + " ";
				
				if(newY < -100)
				{
					despawnPoints--; //Counts up how many points are above a line. if too many points have exited the screen area despawn the polygon
				}
			}
		}
		
		if(despawnPoints > 0)
		{
			document.getElementById("pol" + polyID).setAttribute("points",newString);
		}
		else
		{
		
			//Delete polygons here
			
			
			//delete polygons[polygons.indexOf(parseInt(polyID))];

			//document.getElementById("pol" + polyID).remove();

		}
	}
}

function _PrintPoints(arrayArg)
{
	var output = ""
	for(index in arrayArg)
	{
		output += arrayArg[index] + " ";
	}
	
	return output;
}
</script>

</html>